<html>
    <head>
        <script src="https://apis.google.com/js/api.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="./lib/airtable.browser.js"></script>
        <script src="./lib/youtubedata.js"></script>
        <script src="./lib/youtubechannellist.js"></script>
        <script src="./lib/youtubechannelconfiguration.js"></script>
        <script>
          //API Key used for accessing the YouTube API
          var youtubeApiKey = 'AIzaSyClnRkQON9_oUA9nXShlGKOwLXGRG2sqvY';

          //Airtable identifiers for the API
          var airtableBaseId = 'appDuKh62DrdrfGGy';
          var readonlyApiKey = 'keyfGNPlzxgkVj5Eo';

          //Update the markup with the latest data from the API
          async function updateStats(){
            //Get the configured list of channels we want to show on the dashboard
            var youtubeChannelConfiguration = new YouTubeChannelConfiguration(readonlyApiKey, airtableBaseId);
            var configuredChannels = await youtubeChannelConfiguration.getChannelConfiguration();

            //Fill out the table in the markup with a new YouTube Channel listing
            var youtubeChannelList = new YouTubeChannelList(youtubeApiKey, "#channelList", configuredChannels);
            youtubeChannelList.fillTable();
          }

          $(document).ready(updateStats);
          </script>
    </head>
    <body>
        <h1>YouTube Dashboard</h1>
        <h2>Competitor Ranking</h2>
        <table id="channelList">
          <tr><th>Channel</th><th>Subscribers</th></tr>
        </table>
    </body>
</html>